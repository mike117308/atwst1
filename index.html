<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Plane Contrail Demo</title>
<style>
  body { margin: 0; overflow: hidden; background: #2d608e; }
  #overlay {
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    font-family: Arial, sans-serif;
    font-size: 5em;
    font-weight: bold;
    color: white;
    opacity: 1; /* Always visible now */
    pointer-events: none;
    z-index: 10;
  }
</style>
</head>
<body>
<div id="overlay">AIRâ€‘TEC</div>
<script src="https://cdn.jsdelivr.net/npm/three@0.150.0/build/three.min.js"></script>
<script>
let scene = new THREE.Scene();
let camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
let renderer = new THREE.WebGLRenderer({antialias: true});
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// Placeholder "plane"
let planeGeometry = new THREE.BoxGeometry(1, 0.3, 0.3);
let planeMaterial = new THREE.MeshBasicMaterial({color: 0xffffff});
let plane = new THREE.Mesh(planeGeometry, planeMaterial);
scene.add(plane);

// Contrail particles
let particles = [];
let particleMaterial = new THREE.MeshBasicMaterial({color: 0xffffff});
function addParticle(x, y, z) {
    let geo = new THREE.SphereGeometry(0.05, 8, 8);
    let p = new THREE.Mesh(geo, particleMaterial.clone());
    p.position.set(x, y, z);
    scene.add(p);
    particles.push({mesh: p, life: 1});
}

camera.position.z = 5;

// Start plane off-screen left
plane.position.x = -8;

let clock = new THREE.Clock();
function animate() {
    requestAnimationFrame(animate);
    let delta = clock.getDelta();

    // Move plane forward
    plane.position.x += delta * 2; // Adjust speed here

    // Drop particles at plane's tail
    addParticle(plane.position.x - 0.6, plane.position.y, plane.position.z);

    // Update particles (fade and shrink)
    for (let i = particles.length - 1; i >= 0; i--) {
        particles[i].life -= delta * 0.5;
        particles[i].mesh.scale.setScalar(particles[i].life);
        particles[i].mesh.material.opacity = particles[i].life;
        if (particles[i].life <= 0) {
            scene.remove(particles[i].mesh);
            particles.splice(i, 1);
        }
    }

    // Reset when plane goes off-screen right
    if (plane.position.x > 8) {
        plane.position.x = -8; // Loop back
        particles = [];
    }

    renderer.render(scene, camera);
}
animate();

// Handle window resize
window.addEventListener('resize', () => {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
});
</script>
</body>
</html>
